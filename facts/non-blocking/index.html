<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Non-blocking fact request</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.108.0"><meta name=description content="Non-blocking fact request - Joinself - Platform Documentation "><link rel=stylesheet href=https://docs.joinself.com/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://docs.joinself.com/plugins/themify-icons/themify-icons.css><link rel=icon href=https://docs.joinself.com/images/favicon.png type=image/x-icon><link href="https://fonts.googleapis.com/css?family=Barlow:300,400,700&display=swap" rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.js></script><style>:root{--primary-color:#0e1c42;--body-color:#f9f9f9;--text-color:#636363;--text-color-dark:#0e1c42;--white-color:#ffffff;--light-color:#f8f9fa;--font-family:Barlow}</style><link href=https://docs.joinself.com/css/style.min.css rel=stylesheet media=screen><script src=https://docs.joinself.com/plugins/jquery/jquery-1.12.4.js></script>
<script src=https://docs.joinself.com/plugins/jquery/jquery-ui.js></script>
<script src=https://docs.joinself.com/plugins/bootstrap/bootstrap.min.js></script>
<script src=https://docs.joinself.com/plugins/match-height/jquery.matchHeight-min.js></script><meta property="og:image" content="https://docs.joinself.com/images/logo.png"><meta property="og:image:width" content="57"><meta property="og:image:height" content="35"><meta property="og:image:type" content="image/png"><meta name=twitter:title content="Non-blocking fact request"><meta name=twitter:description content="Joinself - Platform Documentation"><meta property="og:title" content="Non-blocking fact request"><meta property="og:description" content="Joinself - Platform Documentation"><meta property="og:type" content="website"><meta property="og:url" content="https://docs.joinself.com/facts/non-blocking/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Non-blocking fact request"><meta name=twitter:description content="Joinself - Platform Documentation"></head><body><header class="shadow-bottom sticky-top bg-white"><nav class="navbar navbar-expand-md navbar-light"><div class="container px-2 px-md-0"><a class="navbar-brand px-2" href=/><img class=img-fluid src=https://docs.joinself.com/images/logo.png alt="Joinself - Platform Documentation"></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link text-dark" href=https://www.joinself.com>Home</a></li><li class=nav-item><a class="nav-link text-dark" href=https://www.joinself.com/contact-us>contact</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle text-dark" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>docs</a><div class=dropdown-menu><a class=dropdown-item href=https://docs.joinself.com/setup/>Setup</a>
<a class=dropdown-item href=https://docs.joinself.com/users/>Users</a>
<a class=dropdown-item href=https://docs.joinself.com/messaging/>Messaging</a>
<a class=dropdown-item href=https://docs.joinself.com/authentication/>Authentication</a>
<a class=dropdown-item href=https://docs.joinself.com/facts/>Facts</a>
<a class=dropdown-item href=https://docs.joinself.com/zero/>Zero-knowledge</a>
<a class=dropdown-item href=https://docs.joinself.com/notify/>Notify</a>
<a class=dropdown-item href=https://docs.joinself.com/storageless/>Recurrent requests</a>
<a class=dropdown-item href=https://docs.joinself.com/documentsign/>Document sign</a>
<a class=dropdown-item href=https://docs.joinself.com/directconnection/>Direct connection</a></div></li></ul></div></div></nav></header><section class="single section-sm pb-0"><div class=container><div class=row><div class=col-lg-3><div class=sidebar><a class=back-btn href=/ aria-label=back></a><ul class=list-styled><li data-nav-id=https://docs.joinself.com/facts/ title=Facts class=sidelist><a href=https://docs.joinself.com/facts/>Facts</a><ul><li data-nav-id=https://docs.joinself.com/facts/blocking/ title="Blocking fact request" class=sidelist><a href=https://docs.joinself.com/facts/blocking/>Blocking fact request</a></li><li data-nav-id=https://docs.joinself.com/facts/non-blocking/ title="Non-blocking fact request" class="sidelist
active"><a href=https://docs.joinself.com/facts/non-blocking/>Non-blocking fact request</a></li><li data-nav-id=https://docs.joinself.com/facts/async/ title="Asynchronous fact request" class=sidelist><a href=https://docs.joinself.com/facts/async/>Asynchronous fact request</a></li><li data-nav-id=https://docs.joinself.com/facts/modifiers/ title="Modifiers for fact requests" class=sidelist><a href=https://docs.joinself.com/facts/modifiers/>Modifiers for fact requests</a></li><li data-nav-id=https://docs.joinself.com/facts/subscribe/ title="Subscribe to fact response" class=sidelist><a href=https://docs.joinself.com/facts/subscribe/>Subscribe to fact response</a></li><li data-nav-id=https://docs.joinself.com/facts/response/ title="Fact response" class=sidelist><a href=https://docs.joinself.com/facts/response/>Fact response</a></li><li data-nav-id=https://docs.joinself.com/facts/customfacts/ title="Custom facts" class=sidelist><a href=https://docs.joinself.com/facts/customfacts/>Custom facts</a></li></ul></li></ul></div></div><div class=col-lg-9><div class="p-lg-5 p-4 bg-white" id=content><h2 class=mb-5 id=title>Non-blocking fact request</h2><div class=content><p>The sdk also allows us to send a fact request without blocking the execution line.</p><p>Same registration example we used for authentication works here, if you want to get a user <strong>verified fact</strong> but you don’t want the user to be blocked on the registration form, you can use this approach to continue with the execution line, and process the response as soon as it gets back.</p><p>Let’s see how we can request a verified email address with a non-blocking request.</p><div class=code-tabs><ul class="nav nav-tabs"></ul><div class=tab-content><div class=tab-pane title=Ruby><pre><code>    def get_email_in_background(selfid)
        @client.facts.request(user, [:email_address]) do |res|
            return &quot;&quot; unless res.accepted?
            return res.attestation_values_for(:email_address).first
            # Refer to Receiving fact response - Deal with request for more info
        end
        rescue =&gt; e # An exception will be raised in case of a timeout or internal error
        return &quot;&quot;
    end
</code></pre></div><div class=tab-pane title=Go><pre><code>// Use goroutines to build a non-blocking example based on the blocking one
go func() {
    req := fact.FactRequest{
    SelfID:      selfID,
        Description: &quot;info&quot;,
        Facts: []fact.Fact{{ Fact: fact.FactEmail }},
        Expiry: time.Minute * 5,
    }
<pre><code>resp, err := client.FactService().Request(&amp;amp;req)
if err != nil {
    return &amp;quot;&amp;quot;, err
}


aa, err := resp.AttestaionValuesFor(fact.FactEmail)
if err != nil {
    return &amp;quot;&amp;quot;, err
}

println(aa[0])
</code></pre><p>if err != nil {
// failed
}
// do something with email
}</code></pre></p></div><div class=tab-pane title=Typescript><pre><code>async() =&gt; {
try {
    let res = await sdk.facts().request(selfID, [{ fact: 'email_address' }])
<pre><code>if (!res) {
sdk.logger.warn(`fact request has timed out`)
} else if (res.status === 'accepted') {
let pn = res.attestationValuesFor('email_address')[0]
sdk.logger.info(`${selfID} email address is &amp;quot;${pn}&amp;quot;`)
} else {
sdk.logger.warn(`${selfID} has rejected your authentication request`)
}
</code></pre><p>} catch (error) {
sdk.logger.error(error.toString())
}
}</code></pre></p></div></div></div></div><nav class="pagination mt-3"><a class="nav nav-prev" href=https://docs.joinself.com/facts/blocking/ aria-label="Previous page"><i class="ti-arrow-left mr-2"></i>
<span class="d-none d-md-block">Blocking fact request</span></a>
<a class="nav nav-next" href=https://docs.joinself.com/facts/async/ aria-label="Previous page"><span class="d-none d-md-block">Asynchronous fact request</span><i class="ti-arrow-right ml-2"></i></a></nav></div></div></div></div></section><footer class="section pb-4"><div class=container><div class="row align-items-center"><div class="col-md-8 text-md-left text-center"><p class="mb-md-0 mb-4">© Self Group Ltd. 2022</p></div><div class="col-md-4 text-md-right text-center"><ul class=list-inline><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://twitter.com/futureoftrust aria-label=Twitter><i class=ti-twitter-alt></i></a></li><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://github.com/joinself/ aria-label=Github><i class=ti-github></i></a></li><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://www.linkedin.com/company/joinself/ aria-label=Linkedin><i class=ti-linkedin></i></a></li></ul></div></div></div></footer><style>.form-control{border-radius:10px!important}.banner{background-color:#0e1c42!important}.overlay::before{opacity:0!important}.bg-cover{background-size:contain;background-position:100%}</style><script src=https://docs.joinself.com/js/script.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script>
<link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/default.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js></script>
<script>function setCookie(e,t,n){var s=new Date;s.setTime(s.getTime()+n*24*60*60*1e3),document.cookie=e+"="+t+";path=/;expires="+s.toUTCString()}function getCookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}function defaultPageTabs(e){let n=$(".code-tabs");for(var t=0;t<n.length;t++)$(n[t]).find(".active").removeClass("active"),tab=$(n[t]).find(".tab-pane").eq(e),$(tab).addClass("active"),tabHeader=$(n[t]).find(".nav-item").eq(e),$(tabHeader).addClass("active")}$("document").ready(function(){hljs.highlightAll(),mermaid.initialize({startOnLoad:!0}),$(".nav-tabs a").click(function(){var n=$(this).parent(),t=n.index();defaultPageTabs(t),setCookie("tabIndex",t,200)}),tabIndex=getCookie("tabIndex"),tabIndex!=null&&defaultPageTabs(tabIndex)})</script></body></html>